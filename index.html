<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìö ‡¶ï‡¶ø‡¶°‡ßç‡¶°‡ßã ‡¶¨‡ßÅ‡¶ï ‡¶∏‡ßç‡¶ü‡¶≤</title>
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Hind Siliguri', sans-serif;
        }

        :root {
            --primary: #8B5CF6;
            --secondary: #7C3AED;
            --accent: #F59E0B;
            --premium: #F59E0B;
            --success: #10B981;
            --warning: #F59E0B;
            --error: #EF4444;
            --dark: #1F2937;
            --light: #F9FAFB;
            --text: #374151;
            --text-light: #FFFFFF;
            --card-bg: #FFFFFF;
            --premium-bg: #FFFBEB;
            --shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            --gradient: linear-gradient(135deg, #8B5CF6, #7C3AED);
            --premium-gradient: linear-gradient(135deg, #F59E0B, #D97706);
            --bkash: #E2136E;
            --nagad: #F8A01C;
            --rocket: #7948AA;
        }

        body {
            background: linear-gradient(135deg, #F3F4F6, #E5E7EB);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
            padding-bottom: 40px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }

        /* Header Styles */
        header {
            background: var(--gradient);
            color: var(--text-light);
            padding: 25px 0;
            border-bottom-left-radius: 30px;
            border-bottom-right-radius: 30px;
            box-shadow: var(--shadow);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffffff' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E");
            opacity: 0.3;
        }

        .header-content {
            position: relative;
            z-index: 1;
        }

        header h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        header p {
            font-size: 1rem;
            max-width: 600px;
            margin: 0 auto;
            opacity: 0.9;
            padding: 0 15px;
        }

        .admin-indicator {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255, 255, 255, 0.2);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            cursor: pointer;
            display: none;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }

        .admin-indicator.active {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* Book Grid Styles */
        .section-title {
            text-align: center;
            margin: 30px 0 20px;
            color: var(--text);
            font-size: 1.8rem;
            font-weight: 600;
        }

        .section-subtitle {
            text-align: center;
            margin-bottom: 30px;
            color: #6B7280;
            font-size: 1.1rem;
        }

        .book-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 20px;
        }

        /* Desktop - 4 books per row */
        @media (min-width: 1024px) {
            .book-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 25px;
            }
        }

        /* Tablet - 3 books per row */
        @media (min-width: 768px) and (max-width: 1023px) {
            .book-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 20px;
            }
        }

        .book-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            box-shadow: var(--shadow);
            display: flex;
            flex-direction: column;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            border: 1px solid #E5E7EB;
            min-height: 320px;
        }

        .book-card.premium {
            background: var(--premium-bg);
            border: 2px solid var(--premium);
        }

        .book-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: var(--gradient);
        }

        .book-card.premium::before {
            background: var(--premium-gradient);
        }

        .book-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(139, 92, 246, 0.15);
        }

        .book-card.premium:hover {
            box-shadow: 0 20px 40px rgba(245, 158, 11, 0.15);
        }

        .book-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--gradient);
            color: white;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
            z-index: 2;
            box-shadow: 0 3px 8px rgba(139, 92, 246, 0.3);
        }

        .premium-badge {
            background: var(--premium-gradient);
            box-shadow: 0 3px 8px rgba(245, 158, 11, 0.3);
        }

        .book-card .emoji {
            font-size: 70px;
            margin-bottom: 20px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .book-card h3 {
            font-size: 1.2rem;
            margin-bottom: 12px;
            color: var(--primary);
            text-align: center;
            font-weight: 600;
            line-height: 1.4;
            min-height: 55px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .book-card.premium h3 {
            color: var(--premium);
        }

        .book-description {
            font-size: 0.9rem;
            color: #64748B;
            margin-bottom: 20px;
            text-align: center;
            line-height: 1.5;
            min-height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .book-price {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--premium);
            text-align: center;
            margin-bottom: 15px;
        }

        .book-card .download-btn {
            display: block;
            background: var(--gradient);
            color: white;
            text-align: center;
            padding: 14px 20px;
            border-radius: 50px;
            font-weight: 600;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: auto;
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
            font-size: 1rem;
            border: none;
            cursor: pointer;
            text-decoration: none;
        }

        .book-card .premium-btn {
            background: var(--premium-gradient);
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);
        }

        .book-card .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(139, 92, 246, 0.4);
        }

        .book-card .premium-btn:hover {
            box-shadow: 0 6px 20px rgba(245, 158, 11, 0.4);
        }

        .book-card .download-count {
            margin-top: 12px;
            font-size: 0.85rem;
            color: #94A3B8;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        /* Payment Modal */
        .payment-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .payment-modal.active {
            display: flex;
        }

        .payment-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .payment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid #F1F5F9;
        }

        .payment-header h3 {
            color: var(--premium);
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .payment-header button {
            background: var(--error);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .payment-header button:hover {
            background: #DC2626;
        }

        .book-preview {
            text-align: center;
            margin-bottom: 25px;
            padding: 20px;
            background: #FFFBEB;
            border-radius: 15px;
            border: 2px dashed var(--premium);
        }

        .book-preview .emoji {
            font-size: 4rem;
            margin-bottom: 15px;
        }

        .book-preview h4 {
            color: var(--premium);
            font-size: 1.3rem;
            margin-bottom: 10px;
        }

        .book-preview .price {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--premium);
        }

        .payment-methods {
            margin-bottom: 25px;
        }

        .payment-methods h4 {
            margin-bottom: 15px;
            color: var(--text);
            font-size: 1.1rem;
        }

        .payment-option {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            border: 2px solid #E5E7EB;
            border-radius: 12px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .payment-option:hover {
            border-color: var(--premium);
            background: #FFFBEB;
        }

        .payment-option.active {
            border-color: var(--premium);
            background: #FFFBEB;
        }

        .payment-icon {
            font-size: 2rem;
            color: var(--premium);
        }

        .payment-info h5 {
            color: var(--text);
            margin-bottom: 5px;
        }

        .payment-info p {
            color: #6B7280;
            font-size: 0.9rem;
        }

        .payment-form {
            display: none;
            margin-bottom: 20px;
        }

        .payment-form.active {
            display: block;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: var(--text);
            font-weight: 500;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #E5E7EB;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-group input:focus {
            border-color: var(--premium);
            outline: none;
            box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.1);
        }

        .bkash-form input:focus {
            border-color: var(--bkash);
            box-shadow: 0 0 0 3px rgba(226, 19, 110, 0.1);
        }

        .nagad-form input:focus {
            border-color: var(--nagad);
            box-shadow: 0 0 0 3px rgba(248, 160, 28, 0.1);
        }

        .rocket-form input:focus {
            border-color: var(--rocket);
            box-shadow: 0 0 0 3px rgba(121, 72, 170, 0.1);
        }

        .confirm-btn {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 12px;
            background: var(--premium-gradient);
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .confirm-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(245, 158, 11, 0.4);
        }

        /* Receipt Modal */
        .receipt-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 3000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .receipt-modal.active {
            display: flex;
        }

        .receipt-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            width: 100%;
            max-width: 500px;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .receipt-icon {
            font-size: 4rem;
            color: var(--success);
            margin-bottom: 20px;
        }

        .receipt-content h3 {
            color: var(--success);
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .receipt-details {
            background: #F0FDF4;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 25px;
            text-align: left;
        }

        .receipt-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid #D1FAE5;
        }

        .receipt-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .receipt-item .label {
            color: #6B7280;
            font-weight: 500;
        }

        .receipt-item .value {
            color: var(--text);
            font-weight: 600;
        }

        .download-receipt-btn {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 12px;
            background: var(--success);
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-bottom: 15px;
        }

        .download-receipt-btn:hover {
            background: #059669;
            transform: translateY(-2px);
        }

        .close-receipt-btn {
            width: 100%;
            padding: 12px;
            border: 2px solid #E5E7EB;
            border-radius: 12px;
            background: white;
            color: #6B7280;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .close-receipt-btn:hover {
            background: #F9FAFB;
        }

        /* Admin Panel Styles */
        .admin-panel {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(15, 23, 42, 0.95);
            z-index: 4000;
            display: none;
            overflow-y: auto;
            padding: 20px;
            backdrop-filter: blur(10px);
        }

        .admin-panel.active {
            display: block;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--gradient);
            padding: 20px;
            border-radius: 20px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
            color: white;
        }

        .admin-header h2 {
            font-size: 1.6rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .admin-header button {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 10px 18px;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .admin-stat-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: var(--shadow);
        }

        .admin-stat-card h3 {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 8px;
        }

        .admin-stat-card p {
            color: #6B7280;
            font-size: 0.9rem;
        }

        .admin-section {
            background: white;
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
        }

        .admin-section h3 {
            margin-bottom: 20px;
            color: var(--primary);
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .payment-requests {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .payment-request {
            background: #F9FAFB;
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid var(--premium);
        }

        .request-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .request-book {
            font-weight: 600;
            color: var(--text);
        }

        .request-amount {
            font-weight: 700;
            color: var(--premium);
        }

        .request-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }

        .request-detail {
            font-size: 0.9rem;
        }

        .request-detail .label {
            color: #6B7280;
            font-weight: 500;
        }

        .request-actions {
            display: flex;
            gap: 10px;
        }

        .approve-btn, .reject-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .approve-btn {
            background: var(--success);
            color: white;
        }

        .approve-btn:hover {
            background: #059669;
        }

        .reject-btn {
            background: var(--error);
            color: white;
        }

        .reject-btn:hover {
            background: #DC2626;
        }

        /* Footer */
        footer {
            text-align: center;
            margin-top: 50px;
            color: #6B7280;
            font-size: 0.9rem;
            line-height: 1.6;
            padding: 0 15px;
        }

        .made-by {
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 8px 16px;
            border-radius: 10px;
            background: var(--gradient);
            color: white;
            display: inline-block;
            margin-top: 10px;
            font-weight: 600;
        }

        .made-by:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(139, 92, 246, 0.4);
        }

        /* Responsive Styles */
        @media (max-width: 767px) {
            .book-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }
            
            .book-card {
                padding: 20px;
                min-height: 300px;
            }
            
            .book-card .emoji {
                font-size: 60px;
                height: 70px;
            }
            
            .book-card h3 {
                font-size: 1.1rem;
                min-height: 50px;
            }
            
            header h1 {
                font-size: 1.8rem;
            }
            
            .payment-content, .receipt-content {
                padding: 25px;
            }
            
            .request-actions {
                flex-direction: column;
            }
        }

        @media (max-width: 480px) {
            .book-grid {
                grid-template-columns: 1fr;
            }

            header h1 {
                font-size: 1.6rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <h1>üìö ‡¶ï‡¶ø‡¶°‡ßç‡¶°‡ßã ‡¶¨‡ßÅ‡¶ï ‡¶∏‡ßç‡¶ü‡¶≤</h1>
                <p>‡¶´‡ßç‡¶∞‡¶ø ‡¶è‡¶¨‡¶Ç ‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡¶Ø‡¶º‡¶æ‡¶Æ ‡¶¨‡¶á ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                <div class="admin-indicator" id="adminIndicator">
                    <i class="fas fa-user-shield"></i> ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶Æ‡ßã‡¶°
                </div>
            </div>
        </header>

        <h2 class="section-title">‡¶´‡ßç‡¶∞‡¶ø ‡¶¨‡¶á ‡¶∏‡¶Æ‡ßÇ‡¶π</h2>
        <p class="section-subtitle">‡¶¨‡¶ø‡¶®‡¶æ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø‡ßá ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®</p>

        <div class="book-grid" id="freeBookGrid">
            <!-- Free books will be dynamically added here -->
        </div>

        <h2 class="section-title" style="margin-top: 50px;">‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡¶Ø‡¶º‡¶æ‡¶Æ ‡¶¨‡¶á ‡¶∏‡¶Æ‡ßÇ‡¶π</h2>
        <p class="section-subtitle">‡¶ï‡¶ø‡¶®‡ßá ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®</p>

        <div class="book-grid" id="premiumBookGrid">
            <!-- Premium books will be dynamically added here -->
        </div>

        <footer>
            <p>‡¶ï‡¶ø‡¶°‡ßç‡¶°‡ßã ‡¶¨‡ßÅ‡¶ï ‡¶∏‡ßç‡¶ü‡¶≤ - ‡¶ú‡ßç‡¶û‡¶æ‡¶®‡ßá‡¶∞ ‡¶Ü‡¶≤‡ßã ‡¶õ‡¶°‡¶º‡¶ø‡¶Ø‡¶º‡ßá ‡¶¶‡¶ø‡¶®</p>
            <p class="made-by" id="madeBy">‡¶ï‡¶ø‡¶°‡ßç‡¶°‡ßã ‡¶¨‡ßÅ‡¶ï ‡¶∏‡ßç‡¶ü‡¶≤ - Made by kiddo</p>
        </footer>
    </div>

    <!-- Payment Modal -->
    <div class="payment-modal" id="paymentModal">
        <div class="payment-content">
            <div class="payment-header">
                <h3><i class="fas fa-crown"></i> ‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡¶Ø‡¶º‡¶æ‡¶Æ ‡¶¨‡¶á ‡¶ï‡¶ø‡¶®‡ßÅ‡¶®</h3>
                <button id="closePaymentModal"><i class="fas fa-times"></i></button>
            </div>

            <div class="book-preview" id="bookPreview">
                <!-- Book preview will be dynamically added here -->
            </div>

            <div class="payment-methods">
                <h4>‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</h4>
                <div class="payment-option" id="bkashOption">
                    <div class="payment-icon" style="color: var(--bkash);">
                        <i class="fas fa-mobile-alt"></i>
                    </div>
                    <div class="payment-info">
                        <h5>‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂</h5>
                        <p>‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂ ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ‡ßá ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                    </div>
                </div>
                <div class="payment-option" id="nagadOption">
                    <div class="payment-icon" style="color: var(--nagad);">
                        <i class="fas fa-wallet"></i>
                    </div>
                    <div class="payment-info">
                        <h5>‡¶®‡¶ó‡¶¶</h5>
                        <p>‡¶®‡¶ó‡¶¶ ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ‡ßá ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                    </div>
                </div>
                <div class="payment-option" id="rocketOption">
                    <div class="payment-icon" style="color: var(--rocket);">
                        <i class="fas fa-rocket"></i>
                    </div>
                    <div class="payment-info">
                        <h5>‡¶∞‡¶ï‡ßá‡¶ü</h5>
                        <p>‡¶∞‡¶ï‡ßá‡¶ü ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ‡ßá ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                    </div>
                </div>
            </div>

            <!-- BKash Form -->
            <div class="payment-form bkash-form" id="bkashForm">
                <div class="form-group">
                    <label for="bkashName">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ *</label>
                    <input type="text" id="bkashName" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßÅ‡¶∞‡ßã ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®" required>
                </div>
                <div class="form-group">
                    <label for="bkashPhone">‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ *</label>
                    <input type="tel" id="bkashPhone" placeholder="01XXXXXXXXX" pattern="[0-9]{11}" required>
                </div>
                <div class="form-group">
                    <label for="bkashTrxId">‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ‡¶Ü‡¶á‡¶°‡¶ø *</label>
                    <input type="text" id="bkashTrxId" placeholder="TRX123456789" required>
                </div>
                <div class="form-group">
                    <label for="bkashEmail">‡¶á‡¶Æ‡ßá‡¶á‡¶≤ (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)</label>
                    <input type="email" id="bkashEmail" placeholder="your@email.com">
                </div>
            </div>

            <!-- Nagad Form -->
            <div class="payment-form nagad-form" id="nagadForm">
                <div class="form-group">
                    <label for="nagadName">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ *</label>
                    <input type="text" id="nagadName" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßÅ‡¶∞‡ßã ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®" required>
                </div>
                <div class="form-group">
                    <label for="nagadPhone">‡¶®‡¶ó‡¶¶ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ *</label>
                    <input type="tel" id="nagadPhone" placeholder="01XXXXXXXXX" pattern="[0-9]{11}" required>
                </div>
                <div class="form-group">
                    <label for="nagadTrxId">‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ‡¶Ü‡¶á‡¶°‡¶ø *</label>
                    <input type="text" id="nagadTrxId" placeholder="TRX123456789" required>
                </div>
                <div class="form-group">
                    <label for="nagadEmail">‡¶á‡¶Æ‡ßá‡¶á‡¶≤ (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)</label>
                    <input type="email" id="nagadEmail" placeholder="your@email.com">
                </div>
            </div>

            <!-- Rocket Form -->
            <div class="payment-form rocket-form" id="rocketForm">
                <div class="form-group">
                    <label for="rocketName">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ *</label>
                    <input type="text" id="rocketName" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßÅ‡¶∞‡ßã ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®" required>
                </div>
                <div class="form-group">
                    <label for="rocketPhone">‡¶∞‡¶ï‡ßá‡¶ü ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ *</label>
                    <input type="tel" id="rocketPhone" placeholder="01XXXXXXXXX" pattern="[0-9]{11}" required>
                </div>
                <div class="form-group">
                    <label for="rocketTrxId">‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ‡¶Ü‡¶á‡¶°‡¶ø *</label>
                    <input type="text" id="rocketTrxId" placeholder="TRX123456789" required>
                </div>
                <div class="form-group">
                    <label for="rocketEmail">‡¶á‡¶Æ‡ßá‡¶á‡¶≤ (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)</label>
                    <input type="email" id="rocketEmail" placeholder="your@email.com">
                </div>
            </div>

            <button class="confirm-btn" id="confirmPayment">
                <i class="fas fa-check-circle"></i> ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
            </button>
        </div>
    </div>

    <!-- Receipt Modal -->
    <div class="receipt-modal" id="receiptModal">
        <div class="receipt-content">
            <div class="receipt-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <h3>‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶´‡¶≤!</h3>
            <p>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶∏‡ßç‡¶ü ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ ‡¶≠‡ßá‡¶∞‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶®‡ßá‡¶∞ ‡¶™‡¶∞ ‡¶¨‡¶á‡¶ü‡¶ø ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶¨‡ßá‡•§</p>
            
            <div class="receipt-details" id="receiptDetails">
                <!-- Receipt details will be dynamically added here -->
            </div>

            <button class="download-receipt-btn" id="downloadReceipt">
                <i class="fas fa-download"></i> ‡¶∞‡¶ø‡¶∏‡¶ø‡¶™‡ßç‡¶ü ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®
            </button>
            <button class="close-receipt-btn" id="closeReceipt">
                ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®
            </button>
        </div>
    </div>

    <!-- Admin Panel -->
    <div class="admin-panel" id="adminPanel">
        <div class="container">
            <div class="admin-header">
                <h2><i class="fas fa-tachometer-alt"></i> ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°</h2>
                <button id="closeAdmin"><i class="fas fa-times"></i> ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            </div>

            <div class="admin-stats">
                <div class="admin-stat-card">
                    <h3 id="totalBooks">0</h3>
                    <p>‡¶Æ‡ßã‡¶ü ‡¶¨‡¶á</p>
                </div>
                <div class="admin-stat-card">
                    <h3 id="totalPayments">0</h3>
                    <p>‡¶Æ‡ßã‡¶ü ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü</p>
                </div>
                <div class="admin-stat-card">
                    <h3 id="pendingPayments">0</h3>
                    <p>‡¶™‡ßá‡¶®‡ßç‡¶°‡¶ø‡¶Ç ‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶∏‡ßç‡¶ü</p>
                </div>
                <div class="admin-stat-card">
                    <h3 id="totalEarnings">‡ß≥ 0</h3>
                    <p>‡¶Æ‡ßã‡¶ü ‡¶Ü‡¶Ø‡¶º</p>
                </div>
            </div>

            <div class="admin-section">
                <h3><i class="fas fa-clock"></i> ‡¶™‡ßá‡¶®‡ßç‡¶°‡¶ø‡¶Ç ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶∏‡ßç‡¶ü</h3>
                <div class="payment-requests" id="paymentRequests">
                    <!-- Payment requests will be dynamically added here -->
                </div>
            </div>

            <div class="admin-section">
                <h3><i class="fas fa-plus-circle"></i> ‡¶®‡¶§‡ßÅ‡¶® ‡¶¨‡¶á ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
                <form id="addBookForm" class="admin-form">
                    <div class="form-group">
                        <label for="bookType">‡¶¨‡¶á‡¶Ø‡¶º‡ßá‡¶∞ ‡¶ß‡¶∞‡¶®</label>
                        <select id="bookType" required>
                            <option value="free">‡¶´‡ßç‡¶∞‡¶ø</option>
                            <option value="premium">‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡¶Ø‡¶º‡¶æ‡¶Æ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="newBookTitle">‡¶¨‡¶á‡¶Ø‡¶º‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ</label>
                        <input type="text" id="newBookTitle" placeholder="‡¶¨‡¶á‡¶Ø‡¶º‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ" required>
                    </div>
                    <div class="form-group">
                        <label for="newBookLink">‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶≤‡¶ø‡¶Ç‡¶ï</label>
                        <input type="url" id="newBookLink" placeholder="‡¶ó‡ßÅ‡¶ó‡¶≤ ‡¶°‡ßç‡¶∞‡¶æ‡¶á‡¶≠ ‡¶≤‡¶ø‡¶Ç‡¶ï" required>
                    </div>
                    <div class="form-group" id="priceField" style="display: none;">
                        <label for="newBookPrice">‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø (‡ß≥)</label>
                        <input type="number" id="newBookPrice" placeholder="150">
                    </div>
                    <div class="form-group">
                        <label for="newBookDescription">‡¶¨‡¶ø‡¶¨‡¶∞‡¶£</label>
                        <textarea id="newBookDescription" placeholder="‡¶¨‡¶á‡¶Ø‡¶º‡ßá‡¶∞ ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£"></textarea>
                    </div>
                    <button type="submit" class="confirm-btn">
                        <i class="fas fa-plus"></i> ‡¶¨‡¶á ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDLogJ9_NzTAkt2cRF1ex1amEu-e9rH8EA",
            authDomain: "kiddo-kamrul.firebaseapp.com",
            projectId: "kiddo-kamrul",
            storageBucket: "kiddo-kamrul.firebasestorage.app",
            messagingSenderId: "714264902093",
            appId: "1:714264902093:web:628164446feacd1eebec84",
            measurementId: "G-4BXFG50W7Q"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Sample books data
        let freeBooks = [];
        let premiumBooks = [];
        let paymentRequests = [];

        // DOM elements
        const freeBookGrid = document.getElementById("freeBookGrid");
        const premiumBookGrid = document.getElementById("premiumBookGrid");
        const paymentModal = document.getElementById("paymentModal");
        const closePaymentModal = document.getElementById("closePaymentModal");
        const bookPreview = document.getElementById("bookPreview");
        const confirmPayment = document.getElementById("confirmPayment");
        const madeBy = document.getElementById("madeBy");
        const bkashOption = document.getElementById("bkashOption");
        const nagadOption = document.getElementById("nagadOption");
        const rocketOption = document.getElementById("rocketOption");
        const bkashForm = document.getElementById("bkashForm");
        const nagadForm = document.getElementById("nagadForm");
        const rocketForm = document.getElementById("rocketForm");
        const receiptModal = document.getElementById("receiptModal");
        const receiptDetails = document.getElementById("receiptDetails");
        const downloadReceipt = document.getElementById("downloadReceipt");
        const closeReceipt = document.getElementById("closeReceipt");
        const adminPanel = document.getElementById("adminPanel");
        const adminIndicator = document.getElementById("adminIndicator");
        const closeAdmin = document.getElementById("closeAdmin");
        const paymentRequestsContainer = document.getElementById("paymentRequests");
        const addBookForm = document.getElementById("addBookForm");
        const bookType = document.getElementById("bookType");
        const priceField = document.getElementById("priceField");

        let selectedBook = null;
        let selectedPaymentMethod = null;
        let currentReceiptData = null;

        // Load data from Firebase
        async function loadData() {
            try {
                // Load free books
                const freeSnapshot = await db.collection('freeBooks').get();
                freeBooks = [];
                freeSnapshot.forEach(doc => {
                    freeBooks.push({ id: doc.id, ...doc.data() });
                });

                // Load premium books
                const premiumSnapshot = await db.collection('premiumBooks').get();
                premiumBooks = [];
                premiumSnapshot.forEach(doc => {
                    premiumBooks.push({ id: doc.id, ...doc.data() });
                });

                // Load payment requests
                const paymentSnapshot = await db.collection('paymentRequests').where('status', '==', 'pending').get();
                paymentRequests = [];
                paymentSnapshot.forEach(doc => {
                    paymentRequests.push({ id: doc.id, ...doc.data() });
                });

                renderFreeBooks();
                renderPremiumBooks();
                renderPaymentRequests();
                updateAdminStats();
            } catch (error) {
                console.error("Error loading data:", error);
                loadSampleData();
            }
        }

        // Load sample data if Firebase fails
        function loadSampleData() {
            freeBooks = [
                {
                    title: "‡¶∏‡¶æ‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ï ‡¶ï‡ßç‡¶Ø‡¶æ‡¶™‡¶∏‡ßÅ‡¶≤ - ‡ßß", 
                    link: "https://drive.google.com/uc?export=download&id=1364e2UqYcPFNo8rdICeEn01eYIxi4lkJ", 
                    downloads: 0, 
                    emoji: "üìï", 
                    year: "‡ß®‡ß¶‡ß®‡ß™", 
                    description: "‡¶è‡¶á ‡¶ï‡ßç‡¶Ø‡¶æ‡¶™‡¶∏‡ßÅ‡¶≤‡ßá ‡¶∞‡¶Ø‡¶º‡ßá‡¶õ‡ßá ‡¶∏‡¶æ‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ï ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡ßã‡¶§‡ßç‡¶§‡¶∞"
                }
            ];

            premiumBooks = [
                {
                    title: "‡¶è‡¶°‡¶≠‡¶æ‡¶®‡ßç‡¶∏‡¶° ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶• ‡¶∏‡ßç‡¶™‡ßá‡¶∂‡¶æ‡¶≤", 
                    link: "#", 
                    downloads: 0, 
                    emoji: "üßÆ", 
                    year: "‡ß®‡ß¶‡ß®‡ß™", 
                    description: "‡¶è‡¶°‡¶≠‡¶æ‡¶®‡ßç‡¶∏‡¶° ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶•‡ßá‡¶Æ‡ßá‡¶ü‡¶ø‡¶ï‡ßç‡¶∏‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶ó‡¶æ‡¶á‡¶°‡¶≤‡¶æ‡¶á‡¶® ‡¶è‡¶¨‡¶Ç ‡¶∏‡¶≤‡¶ø‡¶â‡¶∂‡¶®",
                    price: 150,
                    originalPrice: 200
                }
            ];

            renderFreeBooks();
            renderPremiumBooks();
        }

        // Render free books
        function renderFreeBooks() {
            freeBookGrid.innerHTML = '';
            freeBooks.forEach((book, i) => {
                const card = createBookCard(book, 'free', i);
                freeBookGrid.appendChild(card);
            });
        }

        // Render premium books
        function renderPremiumBooks() {
            premiumBookGrid.innerHTML = '';
            premiumBooks.forEach((book, i) => {
                const card = createBookCard(book, 'premium', i);
                premiumBookGrid.appendChild(card);
            });
        }

        // Create book card
        function createBookCard(book, type, index) {
            const card = document.createElement('div');
            card.className = `book-card ${type === 'premium' ? 'premium' : ''}`;
            
            const priceHtml = type === 'premium' ? 
                `<div class="book-price">‡ß≥ ${book.price} <small style="text-decoration: line-through; color: #9CA3AF; font-size: 0.9rem;">‡ß≥ ${book.originalPrice}</small></div>` : '';

            const buttonHtml = type === 'premium' ? 
                `<button class="download-btn premium-btn" onclick="openPaymentModal(${index})">
                    <i class="fas fa-shopping-cart"></i> ‡¶ï‡¶ø‡¶®‡ßÅ‡¶® ‡¶è‡¶ñ‡¶®
                </button>` :
                `<a href="${book.link}" class="download-btn" target="_blank" onclick="incrementDownload('free', ${index})">
                    <i class="fas fa-download"></i> ‡¶´‡ßç‡¶∞‡¶ø ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶°
                </a>`;

            card.innerHTML = `
                ${book.year ? `<div class="book-badge ${type === 'premium' ? 'premium-badge' : ''}">${book.year}</div>` : ''}
                ${type === 'premium' ? `<div class="book-badge premium-badge"><i class="fas fa-crown"></i> ‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡¶Ø‡¶º‡¶æ‡¶Æ</div>` : ''}
                <div class="emoji">${book.emoji || 'üìö'}</div>
                <h3>${book.title}</h3>
                ${book.description ? `<div class="book-description">${book.description}</div>` : '<div class="book-description"></div>'}
                ${priceHtml}
                <div>
                    ${buttonHtml}
                    <div class="download-count">
                        <i class="fas fa-${type === 'premium' ? 'users' : 'download'}"></i> 
                        ${book.downloads} ${type === 'premium' ? '‡¶ú‡¶® ‡¶ï‡¶ø‡¶®‡ßá‡¶õ‡ßá‡¶®' : '‡¶¨‡¶æ‡¶∞ ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶°'}
                    </div>
                </div>
            `;
            return card;
        }

        // Open payment modal
        function openPaymentModal(index) {
            selectedBook = premiumBooks[index];
            selectedPaymentMethod = null;
            
            resetPaymentForms();
            hideAllForms();
            
            bookPreview.innerHTML = `
                <div class="emoji">${selectedBook.emoji}</div>
                <h4>${selectedBook.title}</h4>
                <p class="book-description">${selectedBook.description}</p>
                <div class="price">‡ß≥ ${selectedBook.price}</div>
            `;
            
            paymentModal.classList.add('active');
        }

        // Reset payment forms
        function resetPaymentForms() {
            document.getElementById('bkashName').value = '';
            document.getElementById('bkashPhone').value = '';
            document.getElementById('bkashTrxId').value = '';
            document.getElementById('bkashEmail').value = '';
            
            document.getElementById('nagadName').value = '';
            document.getElementById('nagadPhone').value = '';
            document.getElementById('nagadTrxId').value = '';
            document.getElementById('nagadEmail').value = '';
            
            document.getElementById('rocketName').value = '';
            document.getElementById('rocketPhone').value = '';
            document.getElementById('rocketTrxId').value = '';
            document.getElementById('rocketEmail').value = '';
        }

        // Hide all payment forms
        function hideAllForms() {
            bkashForm.classList.remove('active');
            nagadForm.classList.remove('active');
            rocketForm.classList.remove('active');
        }

        // Handle payment submission
        async function handlePaymentSubmission() {
            if (!selectedPaymentMethod) {
                alert('‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
                return;
            }

            let formData = {};
            const timestamp = new Date().toISOString();
            const receiptId = 'RCP' + Date.now();

            switch(selectedPaymentMethod) {
                case 'bkash':
                    formData = {
                        name: document.getElementById('bkashName').value,
                        phone: document.getElementById('bkashPhone').value,
                        trxId: document.getElementById('bkashTrxId').value,
                        email: document.getElementById('bkashEmail').value
                    };
                    break;
                case 'nagad':
                    formData = {
                        name: document.getElementById('nagadName').value,
                        phone: document.getElementById('nagadPhone').value,
                        trxId: document.getElementById('nagadTrxId').value,
                        email: document.getElementById('nagadEmail').value
                    };
                    break;
                case 'rocket':
                    formData = {
                        name: document.getElementById('rocketName').value,
                        phone: document.getElementById('rocketPhone').value,
                        trxId: document.getElementById('rocketTrxId').value,
                        email: document.getElementById('rocketEmail').value
                    };
                    break;
            }

            // Validate form data
            if (!formData.name || !formData.phone || !formData.trxId) {
                alert('‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶∏‡¶ï‡¶≤ ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡ßÄ‡¶Ø‡¶º ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶¶‡¶æ‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
                return;
            }

            // Create payment request
            const paymentRequest = {
                bookTitle: selectedBook.title,
                bookId: selectedBook.id,
                amount: selectedBook.price,
                paymentMethod: selectedPaymentMethod,
                customerName: formData.name,
                customerPhone: formData.phone,
                transactionId: formData.trxId,
                customerEmail: formData.email,
                timestamp: timestamp,
                status: 'pending',
                receiptId: receiptId
            };

            try {
                // Save to Firebase
                await db.collection('paymentRequests').add(paymentRequest);
                
                // Show receipt
                showReceipt(paymentRequest);
                paymentModal.classList.remove('active');
                
            } catch (error) {
                console.error('Error saving payment request:', error);
                alert('‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
            }
        }

        // Show receipt
        function showReceipt(paymentData) {
            currentReceiptData = paymentData;
            
            receiptDetails.innerHTML = `
                <div class="receipt-item">
                    <span class="label">‡¶∞‡¶ø‡¶∏‡¶ø‡¶™‡ßç‡¶ü ‡¶Ü‡¶á‡¶°‡¶ø:</span>
                    <span class="value">${paymentData.receiptId}</span>
                </div>
                <div class="receipt-item">
                    <span class="label">‡¶¨‡¶á‡¶Ø‡¶º‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ:</span>
                    <span class="value">${paymentData.bookTitle}</span>
                </div>
                <div class="receipt-item">
                    <span class="label">‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£:</span>
                    <span class="value">‡ß≥ ${paymentData.amount}</span>
                </div>
                <div class="receipt-item">
                    <span class="label">‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ:</span>
                    <span class="value">${paymentData.paymentMethod.toUpperCase()}</span>
                </div>
                <div class="receipt-item">
                    <span class="label">‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ‡¶Ü‡¶á‡¶°‡¶ø:</span>
                    <span class="value">${paymentData.transactionId}</span>
                </div>
                <div class="receipt-item">
                    <span class="label">‡¶∏‡¶Æ‡¶Ø‡¶º:</span>
                    <span class="value">${new Date(paymentData.timestamp).toLocaleString('bn-BD')}</span>
                </div>
            `;
            
            receiptModal.classList.add('active');
        }

        // Download receipt
        function downloadReceiptAsPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Add content to PDF
            doc.setFontSize(20);
            doc.text('‡¶ï‡¶ø‡¶°‡ßç‡¶°‡ßã ‡¶¨‡ßÅ‡¶ï ‡¶∏‡ßç‡¶ü‡¶≤ - ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∞‡¶ø‡¶∏‡¶ø‡¶™‡ßç‡¶ü', 105, 20, { align: 'center' });
            
            doc.setFontSize(12);
            doc.text(`‡¶∞‡¶ø‡¶∏‡¶ø‡¶™‡ßç‡¶ü ‡¶Ü‡¶á‡¶°‡¶ø: ${currentReceiptData.receiptId}`, 20, 40);
            doc.text(`‡¶¨‡¶á‡¶Ø‡¶º‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ: ${currentReceiptData.bookTitle}`, 20, 50);
            doc.text(`‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£: ‡ß≥ ${currentReceiptData.amount}`, 20, 60);
            doc.text(`‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ: ${currentReceiptData.paymentMethod.toUpperCase()}`, 20, 70);
            doc.text(`‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ‡¶Ü‡¶á‡¶°‡¶ø: ${currentReceiptData.transactionId}`, 20, 80);
            doc.text(`‡¶∏‡¶Æ‡¶Ø‡¶º: ${new Date(currentReceiptData.timestamp).toLocaleString('bn-BD')}`, 20, 90);
            doc.text(`‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏: ${currentReceiptData.status}`, 20, 100);
            
            doc.text('‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶! ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶≠‡ßá‡¶∞‡¶ø‡¶´‡¶æ‡¶á ‡¶π‡¶≤‡ßá ‡¶¨‡¶á‡¶ü‡¶ø ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶¨‡ßá‡•§', 20, 120);
            doc.text('‡¶á‡¶Æ‡ßá‡¶á‡¶≤: kiddo@example.com', 20, 130);
            
            // Save the PDF
            doc.save(`receipt-${currentReceiptData.receiptId}.pdf`);
        }

        // Render payment requests in admin panel
        function renderPaymentRequests() {
            paymentRequestsContainer.innerHTML = '';
            
            if (paymentRequests.length === 0) {
                paymentRequestsContainer.innerHTML = '<p>‡¶ï‡ßã‡¶® ‡¶™‡ßá‡¶®‡ßç‡¶°‡¶ø‡¶Ç ‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶∏‡ßç‡¶ü ‡¶®‡ßá‡¶á</p>';
                return;
            }
            
            paymentRequests.forEach((request, index) => {
                const requestElement = document.createElement('div');
                requestElement.className = 'payment-request';
                requestElement.innerHTML = `
                    <div class="request-header">
                        <div class="request-book">${request.bookTitle}</div>
                        <div class="request-amount">‡ß≥ ${request.amount}</div>
                    </div>
                    <div class="request-details">
                        <div class="request-detail">
                            <span class="label">‡¶ó‡ßç‡¶∞‡¶æ‡¶π‡¶ï:</span> ${request.customerName}
                        </div>
                        <div class="request-detail">
                            <span class="label">‡¶®‡¶Æ‡ßç‡¶¨‡¶∞:</span> ${request.customerPhone}
                        </div>
                        <div class="request-detail">
                            <span class="label">‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶®:</span> ${request.transactionId}
                        </div>
                        <div class="request-detail">
                            <span class="label">‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ:</span> ${request.paymentMethod}
                        </div>
                    </div>
                    <div class="request-actions">
                        <button class="approve-btn" onclick="approvePayment('${request.id}', '${request.bookId}')">
                            <i class="fas fa-check"></i> ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶∞‡ßÅ‡¶≠
                        </button>
                        <button class="reject-btn" onclick="rejectPayment('${request.id}')">
                            <i class="fas fa-times"></i> ‡¶∞‡¶ø‡¶ú‡ßá‡¶ï‡ßç‡¶ü
                        </button>
                    </div>
                `;
                paymentRequestsContainer.appendChild(requestElement);
            });
        }

        // Approve payment
        async function approvePayment(requestId, bookId) {
            try {
                // Update payment request status
                await db.collection('paymentRequests').doc(requestId).update({
                    status: 'approved',
                    approvedAt: new Date().toISOString()
                });
                
                // Increment book downloads
                const bookRef = db.collection('premiumBooks').doc(bookId);
                const bookDoc = await bookRef.get();
                if (bookDoc.exists) {
                    await bookRef.update({
                        downloads: (bookDoc.data().downloads || 0) + 1
                    });
                }
                
                // Reload data
                await loadData();
                alert('‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶∞‡ßÅ‡¶≠ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
                
            } catch (error) {
                console.error('Error approving payment:', error);
                alert('‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶∞‡ßÅ‡¶≠ ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§');
            }
        }

        // Reject payment
        async function rejectPayment(requestId) {
            try {
                await db.collection('paymentRequests').doc(requestId).update({
                    status: 'rejected',
                    rejectedAt: new Date().toISOString()
                });
                
                await loadData();
                alert('‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∞‡¶ø‡¶ú‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
                
            } catch (error) {
                console.error('Error rejecting payment:', error);
                alert('‡¶∞‡¶ø‡¶ú‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§');
            }
        }

        // Update admin statistics
        function updateAdminStats() {
            document.getElementById('totalBooks').textContent = freeBooks.length + premiumBooks.length;
            document.getElementById('totalPayments').textContent = paymentRequests.length;
            document.getElementById('pendingPayments').textContent = paymentRequests.length;
            
            const totalEarnings = premiumBooks.reduce((sum, book) => sum + (book.downloads * book.price), 0);
            document.getElementById('totalEarnings').textContent = `‡ß≥ ${totalEarnings}`;
        }

        // Add new book
        async function addNewBook(e) {
            e.preventDefault();
            
            const title = document.getElementById('newBookTitle').value;
            const link = document.getElementById('newBookLink').value;
            const description = document.getElementById('newBookDescription').value;
            const type = bookType.value;
            const price = type === 'premium' ? parseInt(document.getElementById('newBookPrice').value) : 0;
            
            const newBook = {
                title,
                link,
                description,
                downloads: 0,
                emoji: 'üìö',
                year: '‡ß®‡ß¶‡ß®‡ß™',
                ...(type === 'premium' && { price, originalPrice: price + 50 })
            };
            
            try {
                if (type === 'free') {
                    await db.collection('freeBooks').add(newBook);
                } else {
                    await db.collection('premiumBooks').add(newBook);
                }
                
                addBookForm.reset();
                await loadData();
                alert('‡¶¨‡¶á‡¶ü‡¶ø ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
                
            } catch (error) {
                console.error('Error adding book:', error);
                alert('‡¶¨‡¶á ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§');
            }
        }

        // Event listeners
        madeBy.addEventListener('click', function() {
            const password = prompt('‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶®:');
            if (password === 'kiddo123') {
                adminPanel.classList.add('active');
                adminIndicator.classList.add('active');
            } else if (password) {
                alert('‡¶≠‡ßÅ‡¶≤ ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°!');
            }
        });

        closePaymentModal.addEventListener('click', () => paymentModal.classList.remove('active'));
        closeReceipt.addEventListener('click', () => receiptModal.classList.remove('active'));
        closeAdmin.addEventListener('click', () => adminPanel.classList.remove('active'));
        confirmPayment.addEventListener('click', handlePaymentSubmission);
        downloadReceipt.addEventListener('click', downloadReceiptAsPDF);

        // Payment method selection
        bkashOption.addEventListener('click', function() {
            selectedPaymentMethod = 'bkash';
            bkashOption.classList.add('active');
            nagadOption.classList.remove('active');
            rocketOption.classList.remove('active');
            hideAllForms();
            bkashForm.classList.add('active');
        });

        nagadOption.addEventListener('click', function() {
            selectedPaymentMethod = 'nagad';
            nagadOption.classList.add('active');
            bkashOption.classList.remove('active');
            rocketOption.classList.remove('active');
            hideAllForms();
            nagadForm.classList.add('active');
        });

        rocketOption.addEventListener('click', function() {
            selectedPaymentMethod = 'rocket';
            rocketOption.classList.add('active');
            bkashOption.classList.remove('active');
            nagadOption.classList.remove('active');
            hideAllForms();
            rocketForm.classList.add('active');
        });

        // Book type change
        bookType.addEventListener('change', function() {
            if (this.value === 'premium') {
                priceField.style.display = 'block';
            } else {
                priceField.style.display = 'none';
            }
        });

        // Add book form submission
        addBookForm.addEventListener('submit', addNewBook);

        // Close modals when clicking outside
        paymentModal.addEventListener('click', function(e) {
            if (e.target === paymentModal) paymentModal.classList.remove('active');
        });

        receiptModal.addEventListener('click', function(e) {
            if (e.target === receiptModal) receiptModal.classList.remove('active');
        });

        adminPanel.addEventListener('click', function(e) {
            if (e.target === adminPanel) adminPanel.classList.remove('active');
        });

        // Initialize the app
        loadData();
    </script>

    <!-- PDF Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</body>
</html>
